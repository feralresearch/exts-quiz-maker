(this["webpackJsonpexts-quizmaker"]=this["webpackJsonpexts-quizmaker"]||[]).push([[0],{24:function(e,t,n){e.exports={container:"Collapsable_container__3yksG",title:"Collapsable_title__3aKDL",collapsed:"Collapsable_collapsed__2adVV",uncollapsed:"Collapsable_uncollapsed__2ihT4"}},64:function(e,t,n){},65:function(e,t,n){},7:function(e,t,n){e.exports={container:"Home_container__1s89M",innerContainer:"Home_innerContainer__KPFe8",questionList:"Home_questionList__3GBLv",input:"Home_input__2oFaL",navigation:"Home_navigation__1-Q99",button:"Home_button__2fSRs",title:"Home_title__1RtlI",questionBlock:"Home_questionBlock__3BNZF",answerBlock:"Home_answerBlock__2jUv7"}},95:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=(n(64),n(56)),c=n(3),o=(n(65),n(32)),s=n(15),l=n(13),d=n(7),u=n.n(d),m=n(31),p=n(104),f=n(1),j=Object(p.a)((function(e){return e.accepts}),{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))((function(e){var t=e.children,n=e.style,a=e.canDrop,i=e.isOver,r=e.connectDropTarget,c=Object(s.a)({active:{opacity:.75},inactive:{}},n),o=a&&i;return r(Object(f.jsx)("div",{style:o?c.active:c.inactive,children:t}))})),b="MultipleChoiceQuizz",h="SingleChoiceQuizz",v="QUESTION",O="ANSWER",g={description_md:"Description",success_message_md:"Success Message",text_md:"Text",hint_md:"Hint",type:"Quiz Type",MultipleChoiceQuizz:"Multiple Choice",SingleChoiceQuizz:"Single Choice"},x={loadQuizDataFrom:function(e,t){var n=new FileReader;n.onload=function(e){var n=e.target.result.replace(/(\r\n|\n|\r)/gm,""),a=n.replace(/(data-json=['|"]).*?}]}(['|"])/gm,""),i=n.match(/(?<=json=['|"]).*?}]}(?=['|"])/gm);if(!i)return window.alert("I don't know how to deal with this - is it valid quiz content?"),null;var r=(new DOMParser).parseFromString(a,"text/html"),c=[];Array.from(r.getElementsByTagName("div")).forEach((function(e,t){var n=i[t].replaceAll("&quot;",'"').replaceAll("'","&apos;");c.push({type:e.dataset.type,permanentId:e.dataset.permanentId,json:JSON.parse(n)})})),t(c)},n.onerror=function(e){console.error(e)},n.readAsText(e,"UTF-8")},saveQuizDataTo:function(e){var t=e.fileName,n=e.data,a=e.legacyFormat,i=void 0!==a&&a,r="";n.forEach((function(e){var t=JSON.stringify(e.json).replaceAll("'","&apos;");r+="<div\n data-type='".concat(e.type,"'\n")+"data-permanent-id='".concat(e.permanentId,"'\n")+"data-json='".concat(t,"'>\n")+"</div>\n"})),i&&(r=(r=r.replace(/(\r\n|\n|\r)/gm,"")).replaceAll("'",'"')),function(e,t,n){var a=new Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,e);else{var i=document.createElement("a"),r=URL.createObjectURL(a);i.href=r,i.download=e,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(r)}),0)}}(t||"new_quiz.md",r)},merge:function(e,t){var n=Object(s.a)({},e);if("allowMultiple"===t.name){var a=e.data.indexOf(e.data.find((function(e){return e.permanentId===t.id})));e.data[a].type=t.value?b:h,e.data[a].type===b?e.data[a].permanentId=e.data[a].permanentId.replace("single","multiple"):e.data[a].permanentId=e.data[a].permanentId.replace("multiple","single")}else if(t.parentId){var i=e.data.indexOf(e.data.find((function(e){return e.permanentId===t.parentId}))),r=n.data[i].json.answers_attributes.indexOf(n.data[i].json.answers_attributes.find((function(e){return e.permanent_id===t.id})));n.data[i].json.answers_attributes[r][t.name]=t.value}else{var c=e.data.indexOf(e.data.find((function(e){return e.permanentId===t.id})));n.data[c].json[t.name]=t.value}return n}},y=n(102),_=n(103),w=n(33),I={container:{display:"flex",flexDirection:"column",marginBottom:"1rem"},label:{fontSize:".8rem"},display:{fontWeight:200,display:"flex",alignItems:"center",color:"grey",border:"1px solid #eeeeee",fontSize:"1rem",width:"100%",minHeight:"2rem",lineHeight:"1rem",padding:".2rem",background:"white"},inputFocused:{display:"none",fontSize:"1rem",width:"100%",minHeight:"4rem",color:"red"}},C=function(e){var t=e.id,n=e.name,i=e.value,r=e.onChange,c=e.parentId,o=Object(a.useState)(!1),s=Object(l.a)(o,2),d=s[0],u=s[1],m=Object(a.useRef)(null),p=Object(a.useRef)(null);return m.current&&(d?(m.current.style.display="block",p.current.style.display="none",m.current.focus()):(m.current.style.display="none",p.current.style.display="flex",m.current.blur())),Object(f.jsxs)("div",{style:I.container,children:[Object(f.jsx)("div",{style:I.label,children:g[n]?g[n]:n}),Object(f.jsxs)("div",{style:I.content,children:[Object(f.jsx)("textarea",{ref:m,onClick:function(){return u(!0)},onBlur:function(){return u(!1)},"data-permanent-id":t,"data-parent-id":c,onChange:function(e){r({parentId:c,id:t,value:e.target.value,name:n,originalEvent:e})},name:n,value:i,style:I.inputFocused}),Object(f.jsx)("div",{ref:p,onClick:function(){u(!0)},style:I.display,children:Object(f.jsx)(w.a,{children:i})})]})]},t)},k=function(e){var t=e.id,n=e.parentId,a=e.name,i=e.onChange,r=e.value,c=e.options,o=void 0===c?["YES","NO"]:c;return Object(f.jsx)("div",{style:{color:r?o.color[0]:o.color[1]},onClick:function(e){return i({parentId:n,id:t,name:a,value:!r,originalEvent:e})},children:r?o.display[0]:o.display[1]})},z=function(e){var t=e.parentId,n=e.data,a=e.onChange,i=e.moveAnswer,r=e.findAnswer,c=r(n.permanent_id).index,o=Object(y.a)((function(){return{type:O,item:{permanent_id:n.permanent_id,originalIndex:c},collect:function(e){return{isDragging:e.isDragging()}}}}),[n,c,i]),s=Object(l.a)(o,2),d=s[0].isDragging,u=s[1],m=Object(_.a)((function(){return{accept:O,hover:function(e){var t=e.permanent_id;if(t!==n.permanent_id){var a=r(n.permanent_id).index;i(t,a)}}}}),[r,i]),p=Object(l.a)(m,2)[1],j=d?.1:1;return Object(f.jsxs)("div",{ref:function(e){return u(p(e))},style:{border:"1px dashed lightgray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"move",opacity:j},children:[Object(f.jsx)("div",{style:{textAlign:"right"},children:Object(f.jsx)(k,{parentId:t,id:n.permanent_id,name:"correct",value:n.correct,onChange:a,options:{display:["CORRECT","INCORRECT"],color:["darkgreen","red"]}})}),Object(f.jsx)("div",{children:Object(f.jsx)(C,{id:n.permanent_id,parentId:t,name:"text_md",value:n.text_md?n.text_md:"",onChange:a})}),Object(f.jsx)("div",{children:Object(f.jsx)(C,{id:n.permanent_id,parentId:t,name:"hint_md",value:n.hint_md?n.hint_md:"",onChange:a})})]})},S=n(52),N=n(53),D=n(60),L=n(59),A=n(24),E=n.n(A),T=function(e){Object(D.a)(n,e);var t=Object(L.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).toggleState=function(){a.setState({isOpen:!a.state.isOpen})},a.titleClick=function(){a.props.clickableTitle&&a.toggleState()},a.state={isOpen:a.props.isOpen},a}return Object(N.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{style:Object(s.a)({},this.props.style),className:E.a.container,children:[Object(f.jsxs)("div",{onClick:this.titleClick,className:E.a.title,children:[Object(f.jsx)("i",{onClick:this.toggleState,style:{fontSize:"1rem",marginRight:"0.5rem",marginLeft:"0.5rem",opacity:"0.5",whiteSpace:"nowrap"},className:this.state.isOpen?"fas fa-chevron-circle-down":"fas fa-chevron-circle-right"}),this.props.title]}),Object(f.jsx)("div",{className:this.state.isOpen?E.a.uncollapsed:E.a.collapsed,children:this.props.children})]})}}]),n}(a.Component),R=T;T.defaultProps={isOpen:!1,clickableTitle:!0};var q=Object(a.memo)((function(e){var t=e.data,n=e.onChange,i=e.moveQuizItem,r=e.findQuizItem,c=e.onUpdateData,s=r(t.permanentId).index,d=function(e){var a=!e.value,i=t.json.answers_attributes.filter((function(e){return e.correct})).length;a&&i>1?window.alert("You have requested to convert from a multiple-select to a single-select question, but you have more than one answer marked 'correct'. Fix the answers first."):n(e)},m=Object(a.useCallback)((function(e){var n=t.json.answers_attributes.find((function(t){return t.permanent_id===e}));if(n)return{answer:n,index:t.json.answers_attributes.indexOf(n)};console.error("findAnswer: Cannot find ".concat(e))}),[t]),p=Object(a.useCallback)((function(e,n){var a=m(e).index,i=Object(o.a)(t.json.answers_attributes);i.splice(a,0,i.splice(n,1)[0]),c({parentId:t.permanentId,data:i})}),[m,c,t]),j=Object(y.a)((function(){return{type:v,item:{permanentId:t.permanentId,originalIndex:s},collect:function(e){return{isDragging:e.isDragging()}}}}),[t,s,i]),h=Object(l.a)(j,2),O=h[0].isDragging,g=h[1],x=Object(_.a)((function(){return{accept:v,hover:function(e){var n=e.permanentId;if(n!==t.permanentId){var a=r(t.permanentId).index;i(n,a)}}}}),[r,i]),I=Object(l.a)(x,2)[1],S=[];Object.keys(t.json).forEach((function(e){if("answers_attributes"===e){var a=t.type===b;S.push(Object(f.jsx)("div",{children:"Answers"},"title")),S.push(Object(f.jsx)("div",{children:Object(f.jsx)(k,{id:t.permanentId,name:"allowMultiple",value:a,onChange:d,options:{display:["ALLOW MULTIPLE: YES","ALLOW MULTIPLE: NO"],color:["black","black"]}})},"".concat(t.permanentId,"_type"))),t.json.answers_attributes.forEach((function(e){S.push(Object(f.jsx)(z,{moveAnswer:p,findAnswer:m,parentId:t.permanentId,data:e,onChange:n,allowMultiple:a},e.permanent_id))}))}else S.push(Object(f.jsx)("div",{children:Object(f.jsx)(C,{id:t.permanentId,name:e,onChange:n,value:t.json[e]?t.json[e]:""})},"".concat(e,"_").concat(t.permanentId)))}));var N=O?.5:1;return Object(f.jsx)("div",{ref:function(e){return g(I(e))},className:u.a.questionBlock,style:{opacity:N},children:Object(f.jsx)(R,{title:Object(f.jsx)(w.a,{children:t.json.description_md}),children:Object(f.jsx)("div",{className:u.a.answerBlock,children:S})})})})),B=m.b.FILE,F=["text/markdown"],Q=Object(a.memo)((function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)((function(e){window.confirm("Clear current quiz? (you should save first)")&&(r(null),sessionStorage.removeItem("quizData"))}),[]),d=Object(a.useCallback)((function(e){r(e),sessionStorage.setItem("quizData",JSON.stringify(e))}),[]),m=Object(a.useCallback)((function(e){d(x.merge(n,e))}),[n,d]),p=Object(a.useCallback)((function(e){var t=Object(s.a)({},n);t.data[n.data.indexOf(n.data.find((function(t){return t.permanentId===e.parentId})))].json.answers_attributes=e.data,d(t)}),[n,d]),b=Object(a.useMemo)((function(){return[B]}),[]),h=Object(a.useCallback)((function(e){e||console.error("findQuizItem: Cannot find undefined");var t=n.data.filter((function(t){return"".concat(t.permanentId)===e}))[0];return{quizItem:t,index:n.data.indexOf(t)}}),[n]),O=Object(a.useCallback)((function(e,t){var a=h(e).index,i=Object(o.a)(n.data);i.splice(a,0,i.splice(t,1)[0]),d({fileName:n.fileName,data:i})}),[h,n,d]),g=Object(_.a)((function(){return{accept:v}})),y=Object(l.a)(g,2)[1];return Object(a.useEffect)((function(){try{var e=JSON.parse(sessionStorage.getItem("quizData"));e&&(console.warn("Loading saved data"),d(e))}catch(t){}}),[d]),Object(f.jsx)(j,{accepts:b,onDrop:function(e,t){!t||n&&!window.confirm("Replace current quiz?")||(t.getItem().files.length>1&&console.warn("ALLOWMULTIPLE IS FALSE: Accepting only first file"),[t.getItem().files[0]].forEach((function(e){if(!F.includes(e.type))return console.warn("REJECT: ".concat(e.type,". Allowed: ").concat(JSON.stringify(F))),null;x.loadQuizDataFrom(e,(function(t){d({fileName:e.name,data:t})}))})))},children:n&&Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsxs)("div",{className:u.a.navigation,children:[Object(f.jsx)("div",{className:u.a.title,children:n.fileName}),Object(f.jsx)("div",{style:{flexGrow:1}}),Object(f.jsx)("div",{className:u.a.button,children:Object(f.jsx)("input",{onClick:function(){return x.saveQuizDataTo({fileName:n.fileName,data:n.data,legacyFormat:!0})},value:"save: exts format",type:"button"})}),Object(f.jsx)("div",{className:u.a.button,children:Object(f.jsx)("input",{onClick:function(){return x.saveQuizDataTo({fileName:n.fileName,data:n.data,legacyFormat:!1})},value:"save",type:"button"})}),Object(f.jsx)("div",{className:u.a.button,children:Object(f.jsx)("input",{onClick:function(){return c()},value:"clear",type:"button"})})]}),Object(f.jsx)("div",{className:u.a.container,children:Object(f.jsx)("div",{className:u.a.innerContainer,children:Object(f.jsx)("div",{style:{marginBottom:"2rem",fontWeight:900,fontSize:"3rem"},children:Object(f.jsx)("div",{className:u.a.questionList,children:Object(f.jsx)("div",{ref:y,style:{fontSize:"1rem"},children:n.data.map((function(e,t){return Object(f.jsx)(q,{onUpdateData:p,data:e,onChange:m,moveQuizItem:O,findQuizItem:h},e.permanentId.replace("single","").replace("multiple",""))}))})})},n.fileName)})})]})||Object(f.jsx)("div",{className:u.a.container,children:Object(f.jsx)("div",{className:u.a.innerContainer,children:Object(f.jsx)("div",{style:{textAlign:"center",fontSize:"1rem",margin:"auto",border:"1px solid black",background:"white",padding:"4rem"},children:"Drop a quiz .md file here to get started"})})})})})),M=n(57),H=n(58);var U=function(){return Object(f.jsxs)("div",{style:J.container,children:[Object(f.jsx)("div",{style:{width:"10rem",flexGrow:"1"},children:"Quiz Maker"}),Object(f.jsx)("div",{style:J.infoBlock})]})},J={container:{color:"#d30a09",fontFamily:"Mulish",textTransform:"uppercase",backgroundColor:"white",position:"fixed",width:"100%",textAlign:"left",padding:"1rem",display:"flex",flexDirection:"row",fontSize:"1.5rem",alignItems:"center",borderTop:".2rem solid #d30a09",borderBottom:".01rem solid #dee2e6"},infoLabel:{fontWeight:200,marginRight:".5rem"},infoBlock:{textAlign:"right",flexDirection:"column",width:"12rem",fontSize:"0.5rem",fontWeight:900},infoRow:{display:"flex",flexDirection:"row",marginRight:"2rem"},error:{color:"orange",fontSize:".9rem",display:"flex",flexDirection:"row",marginRight:"2rem"}},W=n(55),P=n(18);W.a.add(P.c,P.b,P.f,P.a,P.e,P.d);var G=function(){return Object(f.jsx)(r.a,{children:Object(f.jsx)(M.a,{options:H.a,children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(U,{}),Object(f.jsx)(c.c,{children:Object(f.jsx)(c.a,{path:"/",component:Q})})]})})})},Y=n(30);n.n(Y).a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(G,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.f335ecaf.chunk.js.map